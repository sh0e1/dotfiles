snippets:
  # git
  - name: git
    keyword: g
    snippet: git

  # docker
  - name: docker
    keyword: d
    snippet: docker

  - name: docker ps
    keyword: p
    snippet: ps
    context:
      lbuffer: '^docker\s+'

  - name: docker ps -a
    keyword: pa
    snippet: ps -a
    context:
      lbuffer: '^docker\s+'

  - name: docker images
    keyword: i
    snippet: images
    context:
      lbuffer: '^docker\s+'

  - name: docker logs
    keyword: l
    snippet: logs -f --tail 100
    context:
      lbuffer: '^docker\s+'

.default-options: &default-options
  --no-sort: true
  --info: inline

completions:
  # docker
  - name: docker logs
    patterns:
      - "^docker logs.*"
    sourceCommand: "docker ps | sed 1d"
    options:
      <<: *default-options
      --prompt: "'Container > '"
    callback: "awk '{print $1}'"

  - name: docker stop
    patterns:
      - "^docker stop.*"
    sourceCommand: "docker ps | sed 1d"
    options:
      <<: *default-options
      --prompt: "'Containers > '"
      --multi: true
    callback: "awk '{print $1}'"

  - name: docker rm
    patterns:
      - "^docker rm.*"
    sourceCommand: "docker ps -a | sed 1d"
    options:
      <<: *default-options
      --prompt: "'Containers > '"
      --multi: true
    callback: "awk '{print $1}'"

  - name: docker rmi
    patterns:
      - "^docker rmi.*"
    sourceCommand: "docker images | sed 1d"
    options:
      <<: *default-options
      --prompt: "'Images > '"
      --multi: true
    callback: "awk '{print $1}'"
